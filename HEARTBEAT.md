# HEARTBEAT.md

# Keep this file empty (or with only comments) to skip heartbeat API calls.

# Add tasks below when you want the agent to check something periodically.

# HEARTBEAT Checklist (KST)

## 원칙 (스팸 금지)
- 목표: "자비스 비서"처럼 **먼저 보고/경고/제안**하되, 쓸데없는 말 금지.
- 한 번의 Heartbeat에서 사용자에게 보내는 메시지는 **최대 1개** (짧고 명확).
- **긴 작업/위험한 작업(삭제, 대량 수정, 결제, 외부 전송)**은 실행 전 반드시 물어보기.
- 할 일이 없으면 반드시 정확히 `HEARTBEAT_OK` 로 종료.

## 0) 오늘 로그(없으면 생성)
- KST 기준 오늘 날짜를 YYYY-MM-DD로 계산.
- `memory/` 폴더가 없으면 생성.
- `memory/YYYY-MM-DD.md`가 없으면 생성하고 아래 헤더로 시작:
  - `# Daily Log YYYY-MM-DD (KST)`
  - `## Focus`
  - `## Progress`
  - `## Blockers`
  - `## Next`
- 오늘 Heartbeat에서 찾은 "중요 변화/결정/약속"은 `memory/YYYY-MM-DD.md`에 3~7줄로 짧게 추가.

## 1) 오늘/임박 우선순위 3개 제안 (Notion 있으면 우선)
- Notion/할일 데이터에 접근 가능하면:
  - 오늘/내일 마감, 진행중, 막힘(Blocked) 항목을 먼저 읽고
  - **상위 3개**만 뽑아 "다음 행동(Next action) 1줄"까지 제시.
- Notion 접근이 불가능하면:
  - `TODO.md`, `tasks.md`, `README.md`, 최근 수정된 노트 중 "할 일"이 있는지 찾아 상위 3개 제시.
- 사용자에게 보낼 메시지에는:
  - (1) 오늘 최우선 1개 + **바로 가능한 다음 행동 1개**
  - (2) 그 다음 2개는 제목만
  - (3) 마감/리스크가 있으면 한 줄 경고

## 2) "며칠 안 움직임" 감지 후 경고 (48시간 기준)
- 아래 중 하나라도 가능하면 "최근 활동"을 체크:
  - git repo면: 최근 커밋/변경(48시간 내) 확인
  - 아니면: 워크스페이스 파일 최근 수정 시간 확인
- 48시간 내 의미있는 진행이 없으면:
  - 비난 금지. 대신 **가장 작은 다음 행동 1개**를 제시하고
  - "오늘 10분만 해도 되는 버전"으로 쪼개서 제안.
  - 예: "cocotb 에러 로그 30줄만 가져오기" 같은 수준

## 3) 코드 퀄리티 자동 피드백 (가벼운 것만)
- 최근 변경 파일이 있으면 아래를 우선 체크해서 "리스크"만 짚어라:
  - 테스트/검증이 아예 없거나(테스트 파일/실행 흔적 없음)
  - 에러 처리/리셋/클럭/타이밍 관련 위험 신호(하드웨어/RTL이면 특히)
  - README/사용법/실행 방법이 안 적혀 있어 재현이 어려움
- 무거운 테스트(전체 테스트 실행)는 기본적으로 하지 말고,
  - 대신 "지금 당장 돌릴 최소 명령 1개"를 제안.


## 4) 장기 목표 추적 (MEMORY.md 갱신)
- `MEMORY.md`가 없으면 생성:
  - `# MEMORY`
  - `## Goals`
  - `## Constraints`
  - `## Preferences`
  - `## Ongoing Projects`
- 오늘 새로 확인된 "지속되는 사실/선호/목표 변화"가 있으면 `MEMORY.md`에 1~3줄 추가.
- 단, 사용자 사생활/민감정보는 최소화(필요한 것만).

## 5) 사용자에게 보낼 메시지 템플릿 (짧게)
- 메시지는 아래 형태로 6줄 이내:
  1) 오늘 1순위: (한 줄)
  2) 다음 행동: (한 줄)
  3) 2순위 / 3순위: (짧게)
  4) 리스크/마감 경고(있을 때만): (한 줄)
  5) (선택) 루이/건강/생활 체크 한 줄
- 보낼 게 없으면: `HEARTBEAT_OK`